import{color as e,constant_default$1 as t,number_default as n,rgb_default as r,string_default as i}from"./mermaid-b5860b54.CzyV0eq4.js";import{initRange as a}from"./init.ChQ8xPj6.js";function o(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function c(e){let t,n,r;e.length===2?(t=e===o||e===s?e:l,n=e,r=e):(t=o,n=(t,n)=>o(e(t),n),r=(t,n)=>e(t)-n);function i(e,r,i=0,a=e.length){if(i<a){if(t(r,r)!==0)return a;do{let t=i+a>>>1;n(e[t],r)<0?i=t+1:a=t}while(i<a)}return i}function a(e,r,i=0,a=e.length){if(i<a){if(t(r,r)!==0)return a;do{let t=i+a>>>1;n(e[t],r)<=0?i=t+1:a=t}while(i<a)}return i}function c(e,t,n=0,a=e.length){let o=i(e,t,n,a-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o}return{left:i,center:c,right:a}}function l(){return 0}function u(e){return e===null?NaN:+e}const d=c(o),f=d.right,p=d.left,m=c(u).center;var h=f;const g=Math.sqrt(50),_=Math.sqrt(10),v=Math.sqrt(2);function y(e,t,n){let r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/10**i,o=a>=g?10:a>=_?5:a>=v?2:1,s,c,l;return i<0?(l=10**-i/o,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=10**i*o,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?y(e,t,n*2):[s,c,l]}function b(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];let r=t<e,[i,a,o]=r?y(t,e,n):y(e,t,n);if(!(a>=i))return[];let s=a-i+1,c=Array(s);if(r)if(o<0)for(let e=0;e<s;++e)c[e]=(a-e)/-o;else for(let e=0;e<s;++e)c[e]=(a-e)*o;else if(o<0)for(let e=0;e<s;++e)c[e]=(i+e)/-o;else for(let e=0;e<s;++e)c[e]=(i+e)*o;return c}function x(e,t,n){return t=+t,e=+e,n=+n,y(e,t,n)[2]}function S(e,t,n){t=+t,e=+e,n=+n;let r=t<e,i=r?x(t,e,n):x(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function C(e,t){t||=[];var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function w(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function T(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=Array(r),a=Array(n),o;for(o=0;o<r;++o)i[o]=O(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(e){for(o=0;o<r;++o)a[o]=i[o](e);return a}}function E(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function D(e,t){var n={},r={},i;for(i in(typeof e!=`object`||!e)&&(e={}),(typeof t!=`object`||!t)&&(t={}),t)i in e?n[i]=O(e[i],t[i]):r[i]=t[i];return function(e){for(i in n)r[i]=n[i](e);return r}}function O(a,o){var s=typeof o,c;return o==null||s===`boolean`?t(o):(s===`number`?n:s===`string`?(c=e(o))?(o=c,r):i:o instanceof e?r:o instanceof Date?E:w(o)?C:Array.isArray(o)?T:typeof o.valueOf!=`function`&&typeof o.toString!=`function`||isNaN(o)?D:n)(a,o)}function k(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function ee(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString(`en`).replace(/,/g,``):e.toString(10)}function A(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf(`e`))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function j(e){return e=A(Math.abs(e)),e?e[1]:NaN}function te(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function ne(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}var M=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function N(e){if(!(t=M.exec(e)))throw Error(`invalid format: `+e);var t;return new P({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}N.prototype=P.prototype;function P(e){this.fill=e.fill===void 0?` `:e.fill+``,this.align=e.align===void 0?`>`:e.align+``,this.sign=e.sign===void 0?`-`:e.sign+``,this.symbol=e.symbol===void 0?``:e.symbol+``,this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?``:e.type+``}P.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?`0`:``)+(this.width===void 0?``:Math.max(1,this.width|0))+(this.comma?`,`:``)+(this.precision===void 0?``:`.`+Math.max(0,this.precision|0))+(this.trim?`~`:``)+this.type};function re(e){out:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case`.`:r=i=n;break;case`0`:r===0&&(r=n),i=n;break;default:if(!+e[n])break out;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var F;function ie(e,t){var n=A(e,t);if(!n)return e+``;var r=n[0],i=n[1],a=i-(F=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+Array(a-o+1).join(`0`):a>0?r.slice(0,a)+`.`+r.slice(a):`0.`+Array(1-a).join(`0`)+A(e,Math.max(0,t+a-1))[0]}function I(e,t){var n=A(e,t);if(!n)return e+``;var r=n[0],i=n[1];return i<0?`0.`+Array(-i).join(`0`)+r:r.length>i+1?r.slice(0,i+1)+`.`+r.slice(i+1):r+Array(i-r.length+2).join(`0`)}var L={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+``,d:ee,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>I(e*100,t),r:I,s:ie,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function R(e){return e}var z=Array.prototype.map,B=[`y`,`z`,`a`,`f`,`p`,`n`,`µ`,`m`,``,`k`,`M`,`G`,`T`,`P`,`E`,`Z`,`Y`];function ae(e){var t=e.grouping===void 0||e.thousands===void 0?R:te(z.call(e.grouping,Number),e.thousands+``),n=e.currency===void 0?``:e.currency[0]+``,r=e.currency===void 0?``:e.currency[1]+``,i=e.decimal===void 0?`.`:e.decimal+``,a=e.numerals===void 0?R:ne(z.call(e.numerals,String)),o=e.percent===void 0?`%`:e.percent+``,s=e.minus===void 0?`−`:e.minus+``,c=e.nan===void 0?`NaN`:e.nan+``;function l(e){e=N(e);var l=e.fill,u=e.align,d=e.sign,f=e.symbol,p=e.zero,m=e.width,h=e.comma,g=e.precision,_=e.trim,v=e.type;v===`n`?(h=!0,v=`g`):L[v]||(g===void 0&&(g=12),_=!0,v=`g`),(p||l===`0`&&u===`=`)&&(p=!0,l=`0`,u=`=`);var y=f===`$`?n:f===`#`&&/[boxX]/.test(v)?`0`+v.toLowerCase():``,b=f===`$`?r:/[%p]/.test(v)?o:``,x=L[v],S=/[defgprs%]/.test(v);g=g===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function C(e){var n=y,r=b,o,f,C;if(v===`c`)r=x(e)+r,e=``;else{e=+e;var w=e<0||1/e<0;if(e=isNaN(e)?c:x(Math.abs(e),g),_&&(e=re(e)),w&&+e==0&&d!==`+`&&(w=!1),n=(w?d===`(`?d:s:d===`-`||d===`(`?``:d)+n,r=(v===`s`?B[8+F/3]:``)+r+(w&&d===`(`?`)`:``),S){for(o=-1,f=e.length;++o<f;)if(C=e.charCodeAt(o),48>C||C>57){r=(C===46?i+e.slice(o+1):e.slice(o))+r,e=e.slice(0,o);break}}}h&&!p&&(e=t(e,1/0));var T=n.length+e.length+r.length,E=T<m?Array(m-T+1).join(l):``;switch(h&&p&&(e=t(E+e,E.length?m-r.length:1/0),E=``),u){case`<`:e=n+e+r+E;break;case`=`:e=n+E+e+r;break;case`^`:e=E.slice(0,T=E.length>>1)+n+e+r+E.slice(T);break;default:e=E+n+e+r;break}return a(e)}return C.toString=function(){return e+``},C}function u(e,t){var n=l((e=N(e),e.type=`f`,e)),r=Math.max(-8,Math.min(8,Math.floor(j(t)/3)))*3,i=10**-r,a=B[8+r/3];return function(e){return n(i*e)+a}}return{format:l,formatPrefix:u}}var V,H,U;W({thousands:`,`,grouping:[3],currency:[`$`,``]});function W(e){return V=ae(e),H=V.format,U=V.formatPrefix,V}function G(e){return Math.max(0,-j(Math.abs(e)))}function K(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(j(t)/3)))*3-j(Math.abs(e)))}function q(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,j(t)-j(e))+1}function oe(e){return function(){return e}}function se(e){return+e}var J=[0,1];function Y(e){return e}function X(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:oe(isNaN(t)?NaN:.5)}function ce(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}function le(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=X(i,r),a=n(o,a)):(r=X(r,i),a=n(a,o)),function(e){return a(r(e))}}function ue(e,t,n){var r=Math.min(e.length,t.length)-1,i=Array(r),a=Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=X(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=h(e,t,1,r)-1;return a[n](i[n](t))}}function Z(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function de(){var e=J,t=J,r=O,i,a,o,s=Y,c,l,u;function d(){var n=Math.min(e.length,t.length);return s!==Y&&(s=ce(e[0],e[n-1])),c=n>2?ue:le,l=u=null,f}function f(n){return n==null||isNaN(n=+n)?o:(l||=c(e.map(i),t,r))(i(s(n)))}return f.invert=function(r){return s(a((u||=c(t,e.map(i),n))(r)))},f.domain=function(t){return arguments.length?(e=Array.from(t,se),d()):e.slice()},f.range=function(e){return arguments.length?(t=Array.from(e),d()):t.slice()},f.rangeRound=function(e){return t=Array.from(e),r=k,d()},f.clamp=function(e){return arguments.length?(s=e?!0:Y,d()):s!==Y},f.interpolate=function(e){return arguments.length?(r=e,d()):r},f.unknown=function(e){return arguments.length?(o=e,f):o},function(e,t){return i=e,a=t,d()}}function Q(){return de()(Y,Y)}function fe(e,t,n,r){var i=S(e,t,n),a;switch(r=N(r??`,f`),r.type){case`s`:var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=K(i,o))&&(r.precision=a),U(r,o);case``:case`e`:case`g`:case`p`:case`r`:r.precision==null&&!isNaN(a=q(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type===`e`));break;case`f`:case`%`:r.precision==null&&!isNaN(a=G(i))&&(r.precision=a-(r.type===`%`)*2);break}return H(r)}function pe(e){var t=e.domain;return e.ticks=function(e){var n=t();return b(n[0],n[n.length-1],e??10)},e.tickFormat=function(e,n){var r=t();return fe(r[0],r[r.length-1],e??10,n)},e.nice=function(n){n??=10;var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],c,l,u=10;for(s<o&&(l=o,o=s,s=l,l=i,i=a,a=l);u-- >0;){if(l=x(o,s,n),l===c)return r[i]=o,r[a]=s,t(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function $(){var e=Q();return e.copy=function(){return Z(e,$())},a.apply(e,arguments),pe(e)}export{c as bisector,Q as continuous,Z as copy,$ as linear,S as tickStep};